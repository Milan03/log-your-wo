<!-- START Add Exercise Heading START -->
<div class="content-heading">
    <div>{{ 'log-entry.AddExercise' | translate }}</div>
    <div id="exercise-btns">
        <button class="mb-1 mr-1 btn btn-primary" type="button" (click)="addExerciseFormControl()">+ <em class="fa fa-dumbbell"></em></button>
        <button class="mb-1 mr-1 btn btn-primary" type="button" (click)="addCardioExerciseFormControl()">+ <em class="fa fa-running"></em></button>
    </div>
</div>
<!-- END Add Exercise Heading END -->
<!-- START Active Row Container START -->
<div *ngIf="currentLog.exercises.length > 0 || currentLog.cardioExercises.length > 0" class="container-lg">
    <form [formGroup]="simpleLogForm" class="form-validate" (submit)="submitForm($event, simpleLogForm.value)" novalidate="">
        <div class="md-card">
            <div class="container">
                <!-- START Active Rows START -->
                <div class="row" *ngFor="let exercise of activeRows; let i = index">
                    <!-- START Exercise Row START -->
                    <div class="div-inherit" *ngIf="exercise.formControlNames.get('name').includes(exerciseType)">
                        <div class="col-4">
                            <div class="mda-form-group float-label first-fg">
                                <input class="mda-form-control" name="{{ exercise.formControlNames.get('name') }}" formControlName="{{ exercise.formControlNames.get('name') }}" tabindex="0" aria-invalid="false" (blur)="checkForExerciseValue(exercise, 'name')" />
                                <label>{{ 'log-entry.ExerciseName' | translate }}</label>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('name')).hasError('required') && (simpleLogForm.get(exercise.formControlNames.get('name')).dirty || simpleLogForm.get(exercise.formControlNames.get('name')).touched)">{{ 'global.Required' | translate }}</mat-error>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('name')).hasError('maxlength') && (simpleLogForm.get(exercise.formControlNames.get('name')).dirty || simpleLogForm.get(exercise.formControlNames.get('name')).touched)">{{ 'global.CharacterLimit' | translate }} {{ exerciseNameCharLimit }}</mat-error>
                            </div>
                        </div>
                        <div class="col">
                            <div class="mda-form-group float-label">
                                <input class="mda-form-control" name="{{ exercise.formControlNames.get('sets') }}" formControlName="{{ exercise.formControlNames.get('sets') }}" tabindex="0" aria-invalid="false" (blur)="checkForExerciseValue(exercise, 'sets')" />
                                <label>{{ 'log-entry.ExerciseSets' | translate }}</label>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('sets')).hasError('pattern') && (simpleLogForm.get(exercise.formControlNames.get('sets')).dirty || simpleLogForm.get(exercise.formControlNames.get('sets')).touched)">{{ 'global.NumericOnly' | translate }}</mat-error>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('sets')).hasError('maxlength') && (simpleLogForm.get(exercise.formControlNames.get('sets')).dirty || simpleLogForm.get(exercise.formControlNames.get('sets')).touched)">{{ 'global.CharacterLimit' | translate }} {{ exerciseNumericCharLimit }}</mat-error>
                            </div>
                        </div>
                        <div class="col">
                            <div class="mda-form-group float-label">
                                <input class="mda-form-control" name="{{ exercise.formControlNames.get('reps') }}" formControlName="{{ exercise.formControlNames.get('reps') }}" tabindex="0" aria-invalid="false" (blur)="checkForExerciseValue(exercise, 'reps')" />
                                <label>{{ 'log-entry.ExerciseReps' | translate }}</label>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('reps')).hasError('pattern') && (simpleLogForm.get(exercise.formControlNames.get('reps')).dirty || simpleLogForm.get(exercise.formControlNames.get('reps')).touched)">{{ 'global.NumericOnly' | translate }}</mat-error>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('reps')).hasError('maxlength') && (simpleLogForm.get(exercise.formControlNames.get('reps')).dirty || simpleLogForm.get(exercise.formControlNames.get('reps')).touched)">{{ 'global.CharacterLimit' | translate }} {{ exerciseNumericCharLimit }}</mat-error>
                            </div>
                        </div>
                        <div class="col">
                            <div class="mda-form-group float-label">
                                <input class="mda-form-control" name="{{ exercise.formControlNames.get('weight') }}" formControlName="{{ exercise.formControlNames.get('weight') }}" tabindex="0" aria-invalid="false" (blur)="checkForExerciseValue(exercise, 'weight')" />
                                <label>{{ 'log-entry.ExerciseWeight' | translate }}</label>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('weight')).hasError('maxlength') && (simpleLogForm.get(exercise.formControlNames.get('weight')).dirty || simpleLogForm.get(exercise.formControlNames.get('weight')).touched)">{{ 'global.CharacterLimit' | translate }} {{ exerciseAlphaNumericCharLimit }}</mat-error>
                            </div>
                        </div>
                        <div class="col">
                            <button type="button" class="btn-transparent btn-row-close" (click)="removeExerciseRow(exercise)">
                                <em class="far fa-window-close"></em>
                            </button>
                        </div>
                    </div>
                    <!-- END Exercise Row END -->
                    <!-- START Cardio Exercise Row START -->
                    <div class="div-inherit" *ngIf="exercise.formControlNames.get('name').includes(cardioExerciseType)">
                        <div class="first-col-cv col-4">
                            <div class="mda-form-group float-label first-fg">
                                <input class="mda-form-control" name="{{ exercise.formControlNames.get('name') }}" formControlName="{{ exercise.formControlNames.get('name') }}" tabindex="0" aria-invalid="false" (blur)="checkForExerciseValue(exercise, 'name')" />
                                <label>{{ 'log-entry.ExerciseName' | translate }}</label>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('name')).hasError('required') && (simpleLogForm.get(exercise.formControlNames.get('name')).dirty || simpleLogForm.get(exercise.formControlNames.get('name')).touched)">{{ 'global.Required' | translate }}</mat-error>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('name')).hasError('maxlength') && (simpleLogForm.get(exercise.formControlNames.get('name')).dirty || simpleLogForm.get(exercise.formControlNames.get('name')).touched)">{{ 'global.CharacterLimit' | translate }} {{ exerciseNameCharLimit }}</mat-error>
                            </div>
                        </div>
                        <div class="second-col-cv col-2">
                            <div class="mda-form-group float-label">
                                <input class="mda-form-control" name="{{ exercise.formControlNames.get('distance') }}" formControlName="{{ exercise.formControlNames.get('distance') }}" tabindex="0" aria-invalid="false" (blur)="checkForExerciseValue(exercise, 'distance')" />
                                <label>{{ 'log-entry.ExerciseDistance' | translate }}</label>
                                <mat-error class="text-danger" *ngIf="simpleLogForm.get(exercise.formControlNames.get('distance')).hasError('maxlength') && (simpleLogForm.get(exercise.formControlNames.get('distance')).dirty || simpleLogForm.get(exercise.formControlNames.get('distance')).touched)">{{ 'global.CharacterLimit' | translate }} {{ exerciseAlphaNumericCharLimit }}</mat-error>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="mda-form-group">
                                <label class="duration-label">{{ 'log-entry.ExerciseDuration' | translate }}</label>
                                <button type="button" *ngIf="!exercise.exerciseDuration" mat-button (click)="openDialog(exercise)">+ <em class="far fa-clock"></em></button> 
                                <label matTooltip="{{ 'log-entry.EditDuration' | translate }}" [matTooltipPosition]="'below'" class="duration-display-label" *ngIf="exercise.exerciseDuration" (click)="openDialog(exercise)">{{ exercise.exerciseDuration.get('hours') }}h {{ exercise.exerciseDuration.get('minutes') }}m {{ exercise.exerciseDuration.get('seconds') }}s</label>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="mda-form-group">
                                <mat-form-field>
                                    <mat-select placeholder="{{ 'log-entry.ExerciseIntensity' | translate }}" (selectionChange)="onIntensityChange($event, exercise)" formControlName="{{ exercise.formControlNames.get('intensity') }}">
                                        <mat-option *ngFor="let intensity of intensities" [value]="intensity.value">
                                            {{ intensity.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-2">
                            <button type="button" class="btn-transparent btn-row-close close-btn-cv" (click)="removeCardioExerciseRow(exercise)">
                                <em class="far fa-window-close"></em>
                            </button>
                        </div>
                    </div>
                    <!-- END Cardio Exercise Row END -->
                </div>
                <!-- END Active Rows END -->
                <div class="row">
                    <button class="mb-1 mr-1 btn btn-primary" type="submit">Save to PDF</button>
                </div>
            </div>
        </div>
    </form>
</div>

<div id="exerciseTable" #exerciseTable>
    <h1 *ngIf="currentLog.exercises.length > 0">{{ 'global.ExercisesTitle' | translate }}</h1>
    <table *ngIf="currentLog.exercises.length > 0">
        <tr>
            <th>{{ 'log-entry.ExerciseName' | translate }}</th>
            <th>{{ 'log-entry.ExerciseSets' | translate }}</th>
            <th>{{ 'log-entry.ExerciseReps' | translate }}</th>
            <th>{{ 'log-entry.ExerciseWeight' | translate }}</th>
        </tr>
        <tr *ngFor="let exercise of currentLog.exercises">
            <td>{{ exercise.exerciseName }}</td>
            <td>{{ exercise.sets }}</td>
            <td>{{ exercise.reps }}</td>
            <td>{{ exercise.weight }}</td>
        </tr>
    </table>
    <h1 *ngIf="currentLog.cardioExercises.length > 0">{{ 'global.CardioExercisesTitle' | translate }}</h1>
    <table *ngIf="currentLog.cardioExercises.length > 0">
        <tr>
            <th>{{ 'log-entry.ExerciseName' | translate }}</th>
            <th>{{ 'log-entry.ExerciseDistance' | translate }}</th>
            <th>{{ 'log-entry.ExerciseDuration' | translate }}</th>
            <th>{{ 'log-entry.ExerciseIntensity' | translate }}</th>
        </tr>
        <tr *ngFor="let exercise of currentLog.cardioExercises">
            <td>{{ exercise.exerciseName }}</td>
            <td>{{ exercise.distance }}</td>
            <td *ngIf="exercise.exerciseDuration">{{ exercise.exerciseDuration.get('hours') }}h {{ exercise.exerciseDuration.get('minutes') }}m {{ exercise.exerciseDuration.get('seconds') }}s</td>
            <td>{{ exercise.intensity }}</td>
        </tr>
    </table>
</div>